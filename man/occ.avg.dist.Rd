% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/occ_avg_dist.R
\name{occ.avg.dist}
\alias{occ.avg.dist}
\title{Average pairwise distance between occurrences by species}
\usage{
occ.avg.dist(df, species_col = "species", lon_col = "lon", lat_col = "lat")
}
\arguments{
\item{df}{A data.frame (or tibble) containing species names and coordinates.}

\item{species_col}{Character scalar. Column name containing species names.}

\item{lon_col}{Character scalar. Column name containing longitudes (decimal degrees).}

\item{lat_col}{Character scalar. Column name containing latitudes (decimal degrees).}
}
\value{
A tibble with columns:
\itemize{
\item \code{species}: unique species names.
\item \code{avg_distance_m}: mean pairwise distance (meters).
}
}
\description{
Compute the mean of all unique pairwise great-circle distances between
occurrence records for each species, using longitude/latitude coordinates
(EPSG:4326). Distances are computed with \code{\link[sf:geos_measures]{sf::st_distance()}}.
}
\details{
For each species, the function:
\itemize{
\item Filters out rows with missing species / coordinates.
\item Converts lon/lat to an \code{sf} point object with CRS = 4326.
\item Builds a full distance matrix within the species.
\item Extracts the upper triangle (unique pairs) and averages distances.
}
Species with < 2 valid records return \code{NA}.
}
